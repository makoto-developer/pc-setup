# コマンドパス
export PATH=$HOME/.nodebrew/current/bin:$PATH
#export PATH=/usr/local/go/bin:$HOME/go/bin:$PATH
#export PATH=$HOME/go/bin:$PATH
export PATH="$HOME/.asdf/bin:$HOME/.asdf/shims:$PATH"

# zsh設定

## 履歴ファイルの保存先
export HISTFILE=${HOME}/.zsh_history
## メモリに保存される履歴の件数
export HISTSIZE=1000
## 履歴ファイルに保存される履歴の件数
export SAVEHIST=100000
## 同時に起動したzshの間でヒストリを共有
setopt share_history
## ディレクトリ名の補完で末尾の / を自動的に付加し、次の補完に備える
setopt auto_param_slash
## ファイル名の展開でディレクトリにマッチした場合 末尾に / を付加
setopt mark_dirs
## コマンドラインでも # 以降をコメントと見なす
setopt interactive_comments 
## コマンドを途中まで入力後、historyから絞り込み
autoload -Uz history-search-end
zle -N history-beginning-search-backward-end history-search-end
zle -N history-beginning-search-forward-end history-search-end
bindkey "^P" history-beginning-search-backward-end
bindkey "^N" history-beginning-search-forward-end
## zshの補完機能を有効にする
autoload -Uz compinit
compinit -u
if [ -e /usr/local/share/zsh-completions ]; then
  fpath=(/usr/local/share/zsh-completions $fpath)
fi
### zsh補完で小文字でも大文字にマッチさせる
zstyle ':completion:*' matcher-list 'm:{a-z}={A-Z}'
### zsh補完候補を詰めて表示
setopt list_packed
### zsh補完候補一覧をカラー表示
autoload colors
zstyle ':completion:*' list-colors ''


# iterm設定
export CLICOLOR=1
export TERM=xterm-256color
export LSCOLORS="GxFxCxDxBxegedabagaced"
export LS_COLORS='di=33;:ln=35;40:so=32;40:pi=33;40:ex=31;40:bd=34;46:cd=34;43:su=0;41:sg=0;46:tw=0;42:ow=0;43:'
export GREP_COLOR='1;33'


# ショートカット
alias _="sudo"
alias mk="mkdir"
alias el="elixir"
alias ie="iex"
alias er="erl"
alias n="npm"
alias y="yarn"
alias yn="yarn"
alias yr="yarn"
alias ya="yarn"
alias fire="firebase"
alias fr="firebase"
alias nv='nvim'
alias vi='vim'
alias v="vim"
alias nb="nodebrew"
alias nodeb="nodebrew"
alias dr="docker"
alias dc="docker-compose"
alias gp="grep --color=auto"
alias tw="twty"
alias grep='grep --color=auto'

# zsh系
alias rezsh="source ~/.zshrc"
alias vzshp="vim ~/.zsh_profile"
alias vzshc="vim ~/.zsh_custom_prompt"

# ls系
alias l='ls -ltrG'
alias ll="ls -la"
alias ls='ls -G'

# git系
alias g="git"
alias ga="git add -A"
alias gb="git branch"
alias gs="git status --short --branch"
alias gc="git commit -m"
alias gp="git pull"
alias gf="git fetch"
alias gfp="git fetch -p"
alias gh="git push"
alias gco="git checkout"
alias gcob="git checkout -b"
alias gd="git diff"
# grep
alias glg='git log --abbrev-commit --no-merges --date=short --date=iso --grep'
# ローカルコミットを表示
alias glc='git log --abbrev-commit --no-merges --date=short --date=iso origin/html..html'
# 派生元のブランチを表示
alias gbor="git show-branch | grep '*' | grep -v "$(git rev-parse --abbrev-ref HEAD)" | head -1 | awk -F'[]~^[]' '{print $2}'"


# twty
## ファイルに書き込んで送信
alias twff='twty -ff ~/twitter.txt'
alias twv='vi ~/twitter.txt'
## バイト数を計算する方法
# コマンドにしないけど、vimを開いた状態でg -> ctrl gを押すと下のステータスにバイト数が表示される


# 移動
alias ..='cd ..'
alias ...='cd ../..'
alias ....='cd ../../..'
alias ..2='cd ../..'
alias ..3='cd ../../..'
alias ..4='cd ../../../..'



# カスタムコマンド

## パスワードジェネレータ

alias passgen='openssl rand -base64 16 | pbcopy'

## direnv
export EDITOR=vi
eval "$(direnv hook zsh)"

## itermのタブに名前をつける
functio tabn() {
  echo -ne "\e]1;$1 $2 $3 $4 $5 $6 $7 $8 $9 \a"
}

## itermのタブのカラーを変更する
function tab-color() {
  echo -ne "\033]6;1;bg;red;brightness;$1\a"
  echo -ne "\033]6;1;bg;green;brightness;$2\a"
  echo -ne "\033]6;1;bg;blue;brightness;$3\a"
}

alias t_yellow='tab-color 255 255 0'
alias t_blue='tab-color 0 0  255'
alias t_green='tab-color 0 128 128'
alias t_aqua='tab-color 0 255  255'
alias t_red='tab-color 255 0 0'
alias t_pink='tab-color 255 0 255'
alias t_purple='tab-color 128 0 128'
alias t_olive='tab-color 128 128 0'

## バックグランドのカラーを変える
alias b_prod='echo -ne "\033]1337;SetColors=bg=330000\a"'
alias b_stg='echo -ne "\033]1337;SetColors=bg=003366\a"'

## itermのプロファイルを切り替えるコマンド
## chpf home/chpf officeのように使う
alias chpf='(){echo -e "\033]1337;SetProfile=$1\a"}'


### プロンプトの見た目をカスタマイズ
source ~/.zsh_custom_prompt

